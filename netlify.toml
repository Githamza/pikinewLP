[build]
  publish = "exampleSite/public"
  command = "cd exampleSite && hugo --gc --minify --templateMetrics --templateMetricsHints --forceSyncStatic --themesDir ../.."
  
[build.environment]
  HUGO_VERSION = "0.147.6"
  HUGO_BASEURL = "/"

[[headers]]
  for = "/*"

[headers.values]
  X-Frame-Options = "DENY"
  X-XSS-Protection = "1; mode=block"
  Referrer-Policy = "same-origin"
  Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"

# Cache static assets with content hashes for 1 year
[[headers]]
  for = "/images/*"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.js"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.woff2"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.woff"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.webp"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.png"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.jpg"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.svg"

[headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

# Cache HTML pages with revalidation
[[headers]]
  for = "/*.html"

[headers.values]
  Cache-Control = "public, max-age=3600, must-revalidate"
{{ if site.Params.preloader.enable }}
<div class="preloader">
  <div class="bounceball"></div>
  <div class="fw-bold">LOADING</div>
</div>
<script>
  (function() {
    var preloader = document.querySelector('.preloader');
    if (!preloader) return;
    var hidden = false;

    function hidePreloader() {
      if (hidden) return;
      hidden = true;
      preloader.style.transition = 'opacity 0.2s ease';
      preloader.style.opacity = '0';
      setTimeout(function() {
        preloader.style.display = 'none';
      }, 200);
    }

    // Hide on DOMContentLoaded (faster than window load)
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', hidePreloader);
    } else {
      hidePreloader();
    }

    // Fallback: hide after 1.5 seconds regardless
    setTimeout(hidePreloader, 1500);
  })();
</script>
{{ end }}
